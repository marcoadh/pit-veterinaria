<!DOCTYPE html>
<html lang="es">
    <head><title>Plataforma de Voluntarios</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- LIBRARY FONT-->
        <link type="text/css" rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Lato:400,400italic,700,900,300">
        <!-- LIBRARY CSS-->
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/jquery.selectbox.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/jquery.fancybox.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/jquery.fancybox-buttons.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/mediaelementplayer.min.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/animate.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/Glyphter.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/font-awesome.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/libs/bootstrap-3.3.5/css/bootstrap.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/style.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/owl.carousel.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/modals.css">
        <link type="text/css" rel="stylesheet" href="{{ base_url() }}/css/jquery.dataTables.min.css">
        <link type="text/css" rel="stylesheet"
              href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://apis.google.com/js/client.js"></script>
        <script type="text/javascript" src="https://unpkg.com/default-passive-events"></script>
        <!--<script src="{{ base_url() }}/js/jquery-2.1.4.min.js"></script>-->
        <script src="{{ base_url() }}/js/js.cookie.js"></script>
        <script src="{{ base_url() }}/js/ckeditor/ckeditor.js"></script>
        <script src="{{ base_url() }}/dist/js/sweetalert2.all.min.js"></script>
        <link rel="stylesheet" href="{{ base_url() }}/dist/css/sweetalert.css">
        <script src="https://maps.googleapis.com/maps/api/js?libraries=weather,geometry,visualization,places,drawing&amp;key=AIzaSyBOto-hKdu-7-z4FolFfAgA6ppzmpP303Y"
        type="text/javascript"></script>
    </head>
    <body>

        <div id="page-wrapper">
            <div class="main-content">
                <div class="content">


                    <div class="page-login future rlp">
                        <div class="container">
                            <div class="register-wrapper rlp-wrapper">
                                <div class="login-table rlp-table">
                                    <a href="{{ base_url() }}">
                                        <img src="{{ base_url() }}/images/logo.png" alt="" class="login"/>
                                    </a>
                                    <div class="login-title rlp-title">Formulario de registro</div>
                                    <hr>

                                    <form method="post" autccomplete="off" id="FormInscripcion"  name="FormInscripcion">
                                        <div class="login-form bg-w-form rlp-form">
                                            
                                            <input type="hidden" name="foto" id="foto" value="" />
                                            
                                            <div class="col-md-12">
                                                <label class="control-label form-label">DNI <span class="highlight">*</span>
                                                </label>
                                                <input name="dni" id="dni" type="text" placeholder="Nº de documento de identidad"
                                                       onkeypress="return validarnu(event)"
                                                       maxlength="8"  value=""  class="form-control form-input obligate valdni"
                                                       data-content="Usted debe ingresar su número de documento">
                                            </div>
                                            
                                            <div class="col-md-12">
                                                <label class="control-label form-label">Nombres <span class="highlight">*</span>
                                                </label>
                                                <input name="nombres" id="nombres" type="text" placeholder="Nombres completos"
                                                       class="form-control form-input obligate" onkeypress="return validarle(event)"
                                                       value="" data-content="Usted debe ingresar su nombre">
                                            </div>

                                            <div class="col-md-12">
                                                <label  class="control-label form-label">Apellidos <span class="highlight">*</span>
                                                </label>
                                                <input name="apellidos" id="apellidos" type="text" placeholder="Apellidos completos"
                                                       value="" class="form-control form-input obligate" onkeypress="return validarle(event)"
                                                       data-content="Usted debe ingresar sus apellidos" />
                                            </div>
                               
                                            <div class="col-md-12">
                                                <label  class="control-label form-label">Distrito <span
                                                        class="highlight">*</span>
                                                </label>
                                                <select id="distrito" name="distrito" class="form-control form-input obligate"
                                                        data-content="Usted debe seleccionar si distrito">
                                                    <option value="">:: seleccione ::</option>
                                                    <option value="1251"> Cercado de Lima</option>
                                                    <option value="1252"> Ancon</option>
                                                    <option value="1253"> Ate</option>
                                                    <option value="1254"> Barranco</option>
                                                    <option value="1255"> Breña</option>
                                                    <option value="1256"> Carabayllo</option>
                                                    <option value="1257"> Chaclacayo</option>
                                                    <option value="1258"> Chorrillos</option>
                                                    <option value="1259"> Cieneguilla</option>
                                                    <option value="1260"> Comas</option>
                                                    <option value="1261"> El Agustino</option>
                                                    <option value="1262"> Independencia</option>
                                                    <option value="1263"> Jesus Maria</option>
                                                    <option value="1264"> La Molina</option>
                                                    <option value="1265"> La Victoria</option>
                                                    <option value="1266"> Lince</option>
                                                    <option value="1267"> Los Olivos</option>
                                                    <option value="1268"> Lurigancho</option>
                                                    <option value="1269"> Lurin</option>
                                                    <option value="1270"> Magdalena del Mar</option>
                                                    <option value="1271"> Pueblo Libre</option>
                                                    <option value="1272"> Miraflores</option>
                                                    <option value="1273"> Pachacamac</option>
                                                    <option value="1274"> Pucusana</option>
                                                    <option value="1275"> Puente Piedra</option>
                                                    <option value="1276"> Punta Hermosa</option>
                                                    <option value="1277"> Punta Negra</option>
                                                    <option value="1278"> Rimac</option>
                                                    <option value="1279"> San Bartolo</option>
                                                    <option value="1280"> San Borja</option>
                                                    <option value="1281"> San Isidro</option>
                                                    <option value="1282"> San Juan de Lurigancho</option>
                                                    <option value="1283"> San Juan de Miraflores</option>
                                                    <option value="1284"> San Luis</option>
                                                    <option value="1285"> San Martin de Porres</option>
                                                    <option value="1286"> San Miguel</option>
                                                    <option value="1287"> Santa Anita</option>
                                                    <option value="1288"> Santa Maria del Mar</option>
                                                    <option value="1289"> Santa Sosa</option>
                                                    <option value="1290"> Santiago de Surco</option>
                                                    <option value="1291"> Surquillo</option>
                                                    <option value="1292"> Villa el Salvador</option>
                                                    <option value="1293"> Villa Maria del Triunfo</option>
                                                </select>
                                            </div>
                                            
                                           <div class="col-md-12">
                                                <label  class="control-label form-label">Dirección <span class="highlight">*</span>
                                                </label>
                                                <input name="direccion" id="direccion" type="text" placeholder="Dirección"
                                                       value="" class="form-control form-input obligate" data-content="Usted debe ingresar su dirección" />
                                            </div>

                                            <div class="col-md-6">
                                                <label class="control-label form-label">Teléfono o celular<span class="highlight">*</span>
                                                </label>
                                                <input name="tel" id="tel" type="text" placeholder="Teléfono"
                                                       onkeypress="return validarnu(event)" value=""
                                                       data-content="Usted debe ingresar su teléfono o celular"
                                                       class="form-control form-input obligate valcel"/>
                                            </div>

                                            <div class="col-md-6">
                                                <label class="control-label form-label">Correo <span class="highlight">*</span>
                                                </label>
                                                <input name="email" id="email" type="email" placeholder="Correo electrónico"
                                                       data-content="Usted debe ingresar su correo electrónico"
                                                       class="form-control form-input obligate valcorreo" value=""/>
                                            </div>

                                            <div class="col-md-6">
                                                <label class="control-label form-label">Contraseña <span class="highlight">*</span>
                                                </label>
                                                <input name="clave" id="clave" type="text" placeholder="Contraseña" value=""
                                                       class="form-control form-input obligate"  data-content="Usted debe ingresar una contraseña"/>
                                            </div>

                                            <div class="col-md-6">
                                                <label class="control-label form-label">Repetir contraseña <span class="highlight">*</span>
                                                </label>
                                                <input name="clave2" id="clave2" type="text" placeholder="Contraseña" value=""
                                                       class="form-control form-input obligate" data-content="Usted debe repetir la contraseña"/>
                                            </div>

                                            <div class="msg2 col-md-12"></div>

                                            <div class="col-md-12">
                                                <center>
                                                    <div class="contact-submit">
                                                        <button type="button" id="RegistrarInscripcion" class="btn btn-contact btn-green">
                                                            <span>
                                                                Registrarse
                                                            </span>
                                                        </button>
                                                    </div>
                                                </center>
                                            </div>
                                            {{ csrf.field | raw }}
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <script>

            !function (a) {
                "use strict";

                a(function () {
                    var b = a(window),
                            c = a(document.body),
                            mensaje = '',
                            tipo = '',
                            codigo = '';

                    a("#RegistrarInscripcion").on("click", function () {

                        var b = a(this), dataString;
                        var holder = '';
                        var exito = true;
                        var clave1 = $('#clave').val();
                        var clave2 = $('#clave2').val();

                        $(".obligate").each(function () {
                            if ($(this).val() == '') {
                                $(this).focus();
                                holder = $(this).attr("data-content");
                                exito = false;
                                $(".msg2").html("").show();
                                $(".msg2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                                setTimeout(function () {
                                    $(".msg2").fadeOut(1500);
                                }, 1500);
                                return false;
                            }
                        });
                        
                            $(".valdni").each(function () {
                                if ($(this).val().length < 8) {
                                    $(this).focus();
                                    exito = false;
                                    $(".msg2").html("").show();
                                    $(".msg2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> El DNI debe contener 8 dígitos</div>");
                                    return false;
                                }
                            });

                            $(".valcel").each(function () {
                                if ($(this).val().length < 7) {
                                    $(this).focus();
                                    exito = false;
                                    $(".msg2").html("").show();
                                    $(".msg2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> El teléfono debe contener más de 7 dígitos</div>");
                                    return false;
                                }
                            });

                            $(".valcorreo").each(function () {
                                if ( $(this).val().indexOf('@', 0) == -1 || $(this).val().indexOf('.', 0) == -1) {
                                    $(this).focus();
                                    exito = false;
                                    $(".msg2").html("").show();
                                    $(".msg2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> El formato del correo es incorrecto</div>");
                                    return false;
                                }
                            });

                        if (clave1 != clave2) {
                            exito = false;
                            $(".msg2").html("").show();
                            $(".msg2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i>Validar si la contraseña y la repetición de la contraseña son iguales</div>");
                            setTimeout(function () {
                                $(".msg2").fadeOut(1500);
                            }, 1500);
                            return false;
                        }

                        if (!exito)
                            return false;

                        dataString = $('#FormInscripcion').serialize();
                        $.ajax({
                            type: "POST",
                            url: "usuario/registrar",
                            data: dataString,
                            dataType: 'json',

                            success: function (data) {
                                if (data.response == 'exito') {
                                    $("#FormInscripcion")[0].reset();
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'Registro exitoso',
                                        text: 'Sus datos fueron procesados correctamente',
                                        footer: '<a href="{{path_for('login')}}">Iniciar sesión</a>'
                                    })
                                }else if (data.response == 'existe') {
                                        Swal.fire({
                                            icon: 'error',
                                            title: '¡Advertencia!',
                                            text: 'Su número de DNI ya se encuentra registrado',
                                        })
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: '¡Error!',
                                        text: 'Inténtelo nuevamente',
                                    })
                                }
                            },
                            error: function () {
                                console.log("It failed");
                            }
                        })
                    });
                })
            }

            (jQuery), function () {
                "use strict";
                $('#telefono').keyup(function () {
                    this.value = (this.value + '').replace(/[^0-9]/g, '');
                });
            }();

                function validarnu(e) {
                    tecla = (document.all) ? e.keyCode : e.which;
                    if (tecla == 8)
                        return true;
                    patron = /\d/;
                    te = String.fromCharCode(tecla);
                    return patron.test(te);
                }

                function validarle(e) {
                    tecla = (document.all) ? e.keyCode : e.which;
                    if (tecla == 8)
                        return true; // 3
                    patron = /[A-Za-z\sñ á é í ó ú Á É Í Ó Ú Ñ]/;
                    te = String.fromCharCode(tecla);
                    return patron.test(te);
                }
                
        </script>

    </body>
    <script src="{{ base_url() }}/js/bootstrap.min.js"></script>
    <script src="{{ base_url() }}/js/owl.carousel.min.js"></script>
    <script src="{{ base_url() }}/js/jquery.appear.js"></script>
    <script src="{{ base_url() }}/js/jquery.countTo.js"></script>
    <script src="{{ base_url() }}/js/wow.min.js"></script>
    <script src="{{ base_url() }}/js/jquery.selectbox-0.2.min.js"></script>
    <script src="{{ base_url() }}/js/jquery.fancybox.js"></script>
    <script src="{{ base_url() }}/js/jquery.fancybox-buttons.js"></script>
    <!-- MAIN JS-->
    <script src="{{ base_url() }}/js/main.js"></script>
    <!-- LOADING SCRIPTS FOR PAGE-->
    <script src="{{ base_url() }}/js/isotope.pkgd.min.js"></script>
    <script src="{{ base_url() }}/js/fit-columns.js"></script>
    <script src="{{ base_url() }}/js/homepage.js"></script>

    <script src="https://aplicativos.munlima.gob.pe/js/aplicativo/google-map-infobox.min.js"></script>
    <script src="http://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>

</html>


