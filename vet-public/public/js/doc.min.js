
!function(a){
    "use strict";
    a(function(){
        var b=a(window),
            c=a(document.body),
            content='',
			mycod='',
			mycodigo='';
        a("#loading-example-btn").on("click",function(){
                    var b=a(this),dataString;
					var holder='';
					var exito=true;
					 $(".obligate").each(function(){
						if($(this).val()==''){
						   $(this).focus();
						   holder=$(this).attr("data-content");
						   exito=false;
						    $(".msg").html("").show();
							$(".msg").html("<div class='error'><i class='fa fa-exclamation-triangle'></i>"+holder+"</div>");
                                 setTimeout(function() {
                                    $(".msg").fadeOut(1500);
                           },1500);
						   return false;
						}
					 });
					 if(!exito)
					 return false;
                   
                    dataString=$('#frmaction').serialize();
                    $.ajax({
                        type:"POST",
                        url:"presentacion/action/action.php",
                        data:dataString,
                        beforeSend: function(){
                             b.button("loading");
                        },
                        success: function(data){
							var position=data.indexOf('?');
							var number=data.substr(0,position).replace(/\s+/g, '');
                            //alert(data + "=>" + position + " =>" + number + " =>"+number.length);
							if(number>0){
								b.button("reset");
							     $('#myModal').modal('hide')
							     $('#myModalInformation').find(".modal-body").html("<center>"+data.substr(position+1,data.length)+"</center>");
							     $('#myModalInformation').modal('show');
							}else{
								$(".msg").html("").show();
	                             $(".msg").html(data);
                                 setTimeout(function() {
                                    $(".msg").fadeOut(1500);
                                },1500);
                                 b.button("reset");
							}
							  
                        },
                        error: function(){
							alert("rewr");
                        } 
                    })
                    //setTimeout(function(){b.button("reset")},3e3)
                    
        }),

        a("#myModal").on("show.bs.modal",function(b){
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
					content=c.data("content"),
                    e=a(this);
                    if(d=="nuevo")
                        e.find(".modal-title").text("Nuevo registro");
                    else if(d=="editar")
                        e.find(".modal-title").text("Editar registro");
                    else if(d=="verhistoria")
                        e.find(".modal-title").text("Historico");
				
                    $.ajax({
                        type:"POST",
                        url:"presentacion/forms/add-"+nameform+".php",
                        data:"action="+d+"&content="+content,
                        beforeSend: function(){
                            e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                        },
                        success: function(data){
                            e.find(".modal-body").html(data);
                        },
                        error: function(){
                        } 
                    });         
        }),
		
		a("#AgregarAdvertencia").on("show.bs.modal",function(b){
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
					content=c.data("content"), 
					myBeca=c.data("becaid"),	
                    e=a(this);
                    e.find(".modal-title").text("MENSAJE PARA ADMINISTRADOR");
                    $.ajax({
                        type:"POST",
                        url:"../adm/presentacion/forms/new-mensaje.php",
                        data:"action=verdocumentos&content="+d+"&myBeca="+myBeca,
                        beforeSend: function(){
                            e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                        },
                        success: function(data){
                            e.find(".modal-body").html(data);
                        },
                        error: function(){
                        } 
                    });         
        }),
		
		a("#VerHistorial").on("show.bs.modal",function(b){
				var c=a(b.relatedTarget),
				titulo=c.data("title"),
				content=c.data("content"),
				myBeca=c.data("becaid"),
				tip_doc=c.data("name"),
				e=a(this);
				e.find(".modal-title").text("[" + titulo + "]");
				$.ajax({
					type:"POST",
					url:"http://ladecana.pe/data/ruos/adm/presentacion/forms/ver-historial-doc.php",
					data:"content="+content+"&myBeca="+myBeca+"&mydoc="+tip_doc,
					beforeSend: function(){
						e.find(".modal-body").html("cargando contenido...espere un momento por favor");
					},
					success: function(data){
						e.find(".modal-body").html(data);
					},
					error: function(){
					} 
				});         
		}),
		
		a("#ReSubir").on("show.bs.modal",function(b){
				var c=a(b.relatedTarget),
				titulo=c.data("title"),
				content=c.data("content"), 
				myBeca=c.data("becaid"),	
				tip_doc=c.data("name"),
				user=c.data("user"),
				e=a(this);
				e.find(".modal-title").text("[" + titulo + "]");
				$.ajax({
					type:"POST",
					url:"../adm/presentacion/forms/re-subir-doc.php",
					data:"content="+content+"&myBeca="+myBeca+"&mydoc="+tip_doc+"&user="+user,
					beforeSend: function(){
						e.find(".modal-body").html("cargando contenido...espere un momento por favor");
					},
					success: function(data){
						e.find(".modal-body").html(data);
					},
					error: function(){
					} 
				});         
        }),
		
		

		
	        a("#savemensaje").on("click",function(){
                    var b=a(this),dataString;
					var holder='';
					var exito=true;
					 $(".obligate").each(function(){
						if($(this).val()==''){
						   $(this).focus();
						   holder=$(this).attr("data-content");
						   exito=false;
						    $(".msg").html("").show();
							$(".msg").html("<div class='error'><i class='fa fa-exclamation-triangle'></i>"+holder+"</div>");
                                 setTimeout(function() {
                                    $(".msg").fadeOut(1500);
                           },1500);
						   return false;
						}
					 });
					 if(!exito)
					 return false;
                   
                    dataString=$('#frmaction').serialize();
                    $.ajax({
                        type:"POST",
                        url:"../adm/presentacion/action/action.php",
                        data:dataString,
                        beforeSend: function(){
                             b.button("loading");
                        },
                        success: function(data){
							var position=data.indexOf('?');
							var number=data.substr(0,position).replace(/\s+/g, '');
                            //alert(data + "=>" + position + " =>" + number + " =>"+number.length);
							if(number>0){
								b.button("reset");
							     $('#AgregarAdvertencia').modal('hide')
							     $('#myModalInformation').find(".modal-body").html("<center>"+data.substr(position+1,data.length)+"</center>");
							     $('#myModalInformation').modal('show');
							}else{
								$(".msg").html("").show();
	                             $(".msg").html(data);
                                 setTimeout(function() {
                                    $(".msg").fadeOut(1500);
                                },1500);
                                 b.button("reset");
							}
							  
                        },
                        error: function(){
							alert("rewr");
                        } 
                    })
                    //setTimeout(function(){b.button("reset")},3e3)
                    
        }),
		
        a("#myModalHistory").on("show.bs.modal",function(b){
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
					content=c.data("content"),
                    tbl=c.data("tbl"),
                    e=a(this);
                    e.find(".modal-title").text("Historico");
				
                    $.ajax({
                        type:"POST",
                        url:"presentacion/forms/add-"+nameform+".php",
                        data:"action="+d+"&content="+content+"&tbl="+tbl,
                        beforeSend: function(){
                            e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                        },
                        success: function(data){
                            e.find(".modal-body").html(data);
                        },
                        error: function(){
                        } 
                    });         
        }),
		a("#myModal2").on("show.bs.modal",function(b){
					
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
					mycodigo=c.data("content"),
                    e=a(this);
					mycod=mycodigo;
					$('#myModal2').find(".modal-body").html("<h3 style='color:#157D09;text-align:center;'> Seguro que deseas eliminar el documento ["+mycodigo+"] <i class='fa fa-trash' ></i> ?</h3>");
					//alert(mycodigo);
				
                           
        }),
        a("#VerDocumentos").on("show.bs.modal",function(b){
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
					content=c.data("content"),
					myBeca=c.data("becaid"),
                    myName=c.data("name"),
                    e=a(this);
            //alert("action=verdocumentos&content="+d+"&myBeca="+myBeca);
                    e.find(".modal-title").text("DOCUMENTOS DE [" + myName + "]");
                    $.ajax({
                        type:"POST",
                        url:"presentacion/forms/view-documentos.php",
                        data:"action=verdocumentos&content="+d+"&myBeca="+myBeca,
                        beforeSend: function(){
                            e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                        },
                        success: function(data){
                            e.find(".modal-body").html(data);
                        },
                        error: function(){
                        } 
                    });         
        }),
        a("#Seleccion").on("show.bs.modal",function(b){
                    var c=a(b.relatedTarget),
                    d=c.data("whatever"),
                    e=a(this);
                    e.find(".modal-title").text("Imagenes");
                    
				
                    $.ajax({
                        type:"POST",
                        url:"presentacion/forms/loadimg.php",
                        data:"action="+d,
                        beforeSend: function(){
                            e.find(".modal-body").html("cargando imagenes...espere un momento por favor");
                        },
                        success: function(data){
                            e.find(".modal-body").html(data);
                        },
                        error: function(){
                        } 
                    });         
                           
        }),
		a("#delete-btn").on("click",function(){
			var b=a(this);
            b.button("loading");
			//alert(mycod);
			
			$.ajax({
            	type:"POST",
                url:"action.php",
                data:"type=delete&origen=m-docs&codigo="+mycod,
                beforeSend: function(){

                },
                success: function(datad){
					
                    //alert("Eliminado");
					b.button("reset");
					$("#row_"+mycod).slideUp();
					$('#myModal2').modal('hide')
					$('#myModalInformation').find(".modal-body").html("<center>"+datad+"</center>");
					$('#myModalInformation').modal('show');
					setTimeout("location.reload()", 1000);
					
                },
                error: function(){
					$('#myModalInformation').find(".modal-body").html("<center><h3 style='color:#157D09;'><i class='fa fa-exclamation-triangle'></i&nbsp;>Se ha producido un error inesperado</h3></center>");
					$('#myModalInformation').modal('show');
                } 
            });        
        }),
        a(".seleccion").on("click",function(){

            var valor = $(this).data('codigo');
            //alert(valor);
            $("#Seleccion").modal('hide'); 
            
            $('.foto').val(valor);
        });
		   
    })}

 
(jQuery),function(){"use strict";
    $('#fono').keyup(function (){
            this.value = (this.value + '').replace(/[^0-9]/g, '');
          });

}();






