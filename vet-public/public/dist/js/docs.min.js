!function (a) {
    "use strict";
    a(function () {
        var b = a(window),
            c = a(document.body),
            content = '',
            numero = '',
            operation = '',
            form = '',
            f = '',
            num_sol = '',
            cod_sol = '';


        a("#guardarmensaje").on("click", function () {

            // CKEDITOR.instances['texto'].getData()

            var b = a(this), dataString;
            var holder = '';
            var exito = true;
            $(".obligatemsm").each(function () {
                if ($(this).val() == '') {
                    $(this).focus();
                    holder = $(this).attr("data-content");
                    exito = false;
                    $(".msg").html("").show();
                    $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                    setTimeout(function () {
                        $(".msg").fadeOut(1500);
                    }, 1500);
                    return false;
                }
            });
            if (!exito)
                return false;

            dataString = $('#my_form').serialize();
            $.ajax({
                type: "POST",
                url: "{{ base_url() }}/../../../mensajesadd",
                data: dataString,
                beforeSend: function () {
                    b.button("loading");
                },
                success: function (data) {
                    var position = data.indexOf('?');
                    var number = data.substr(0, position).replace(/\s+/g, '');
                    // alert(data + "=>" + position + " =>" + number + " =>"+number.length);
                    if (number > 0) {
                        b.button("reset");
                        $('#AgregarAdvertencia').modal('hide')
                        $('#modalinfo').find(".modal-body").html("<center>" + data.substr(position + 1, data.length) + "</center>");
                        $('#modalinfo').modal('show');
                        ;
                        setTimeout(function () {
                            window.location.href = window.location;
                        }, 2000);

                    } else {
                        $(".msg").html("").show();
                        $(".msg").html(data);
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                        }, 1000);
                        b.button("reset");
                    }

                },
                error: function () {
                    console.log("It failed");
                }
            })
        });

        a("#updateorg").on("click", function () {
            var b = a(this), dataString;
            var holder = '';
            var exito = true;
            $(".obligate-org").each(function () {
                if ($(this).val() == '') {
                    $(this).focus();
                    holder = $(this).attr("data-content");
                    exito = false;
                    $(".msg").html("").show();
                    $(".msg").html("<div class='error'><i class='fa fa-exclamation-triangle'></i>" + holder + "</div>");
                    setTimeout(function () {
                        $(".msg").fadeOut(1500);
                    }, 1500);
                    return false;
                }
            });
            if (!exito)
                return false;

            dataString = $('#FormActualizarOrganizacion').serialize();
            $.ajax({
                type: "POST",
                url: '{{ base_url() }}/../../../organizacion/actualizarorgl',
                data: dataString,
                dataType: 'json',
                beforeSend: function () {
                    b.button("Guardando");
                },
                success: function (data) {
                    if (data.response == 'si') {
                        alert("Ya existe una organización con el mismo nombre");
                    } else {
                        var position = data.indexOf('?');
                        var number = data.substr(0, position).replace(/\s+/g, '');
                        if (number > 0) {
                            location.reload();
                        } else {
                            alert("Ocurrió un error");
                        }
                    }
                },
                error: function () {
                    alert("error");
                }
            })


        }),

            a("#btnsaveimage").on("click", function () {
                var b = a(this);
                var holder = '';
                var exito = true;
                $(".obligate").each(function () {
                    if ($(this).val() == '') {
                        $(this).focus();
                        holder = $(this).attr("data-content");
                        exito = false;
                        $(".msg").html("").show();
                        $(".msg").html("<div class='error'><i class='fa fa-exclamation-triangle'></i>" + holder + "</div>");
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                        }, 1500);
                        return false;
                    }
                });
                if (!exito)
                    return false;

                var form = $('#frmaction')[0]; // You need to use standart javascript object here
                var formData = new FormData(form);
                $.ajax({
                    type: "POST",
                    url: "presentacion/action/action.php",
                    data: formData,
                    contentType: false,
                    processData: false,
                    beforeSend: function () {
                        b.button("loading");
                    },
                    success: function (data) {
                        var position = data.indexOf('?');
                        var number = data.substr(0, position).replace(/\s+/g, '');
                        //alert(data + "=>" + position + " =>" + number + " =>"+number.length);
                        if (number > 0) {
                            b.button("reset");
                            $('#ModalImage').modal('hide')
                            $('#modalinfo').find(".modal-body").html("<center>" + data.substr(position + 1, data.length) + "</center>");
                            $('#modalinfo').modal('show');
                        } else {
                            $(".msg").html("").show();
                            $(".msg").html(data);
                            setTimeout(function () {
                                $(".msg").fadeOut(1500);
                            }, 1500);
                            b.button("reset");
                        }

                    },
                    error: function () {
                        b.button("reset");
                        alert("Se ha producido un error con la red interna");
                    }
                });
                //setTimeout(function(){b.button("reset")},3e3)

            }),
            a("#savemensaje33").on("click", function () {
                var b = a(this), dataString;
                var holder = '';
                var exito = true;
                $(".obligate").each(function () {
                    if ($(this).val() == '') {
                        $(this).focus();
                        holder = $(this).attr("data-content");
                        exito = false;
                        $(".msg").html("").show();
                        $(".msg").html("<div class='error'><i class='fa fa-exclamation-triangle'></i>" + holder + "</div>");
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                        }, 1500);
                        return false;
                    }
                });
                if (!exito)
                    return false;
                // alert(descrip);
                //return false;
                dataString = $('#frmaction').serialize();
                $.ajax({
                    type: "POST",
                    url: "presentacion/action/action.php",
                    data: dataString + "&descripcion=",

                    beforeSend: function () {
                        b.button("loading");
                    },
                    success: function (data) {
                        var position = data.indexOf('?');
                        var number = data.substr(0, position).replace(/\s+/g, '');
                        //alert(data + "=>" + position + " =>" + number + " =>"+number.length);
                        if (number > 0) {
                            b.button("reset");
                            $('#AgregarAdvertencia').modal('hide')
                            $('#modalinfo').find(".modal-body").html("<center>" + data.substr(position + 1, data.length) + "</center>");
                            $('#modalinfo').modal('show');
                        } else {
                            $(".msg").html("").show();
                            $(".msg").html(data);
                            setTimeout(function () {
                                $(".msg").fadeOut(1500);
                            }, 1500);
                            b.button("reset");
                        }

                    },
                    error: function () {
                        b.button("reset");
                        alert("Se ha producido un error con la red interna");
                    }
                })
                //setTimeout(function(){b.button("reset")},3e3)

            }),
            a("#ModalImage").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    d = c.data("whatever"),
                    content = c.data("content"),
                    e = a(this);
                if (d == "nuevo")
                    e.find(".modal-title").text("Nuevo registro");
                else if (d == "editar")
                    e.find(".modal-title").text("Editar registro");
                else if (d == "verhistoria")
                    e.find(".modal-title").text("Historico");

                $.ajax({
                    type: "POST",
                    url: "presentacion/forms/add-" + nameform + ".php",
                    data: "action=" + d + "&content=" + content,
                    beforeSend: function () {
                        e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                    },
                    success: function (data) {
                        e.find(".modal-body").html(data);
                        $('.tipo').change(function () {
                            if ($('.tipo').val() == 'IMG') {
                                $('.imagendiv').show();
                                $('.videodiv').hide();
                            } else {
                                $('.imagendiv').hide();
                                $('.videodiv').show();
                            }
                        });
                    },
                    error: function () {
                    }
                });
            }),
            a("#myModal").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    d = c.data("whatever"),
                    content = c.data("content"),
                    e = a(this);
                if (d == "nuevo")
                    e.find(".modal-title").text("Nuevo registro");
                else if (d == "editar")
                    e.find(".modal-title").text("Editar registro");
                else if (d == "verhistoria")
                    e.find(".modal-title").text("Historico");

                $.ajax({
                    type: "POST",
                    url: "presentacion/forms/add-" + nameform + ".php",
                    data: "action=" + d + "&content=" + content,
                    beforeSend: function () {
                        e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                    },
                    success: function (data) {
                        e.find(".modal-body").html(data);
                    },
                    error: function () {
                    }
                });
            }),
            a("#myModalHistory").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    d = c.data("whatever"),
                    content = c.data("content"),
                    tbl = c.data("tbl"),
                    e = a(this);
                e.find(".modal-title").text("Historico");

                $.ajax({
                    type: "POST",
                    url: "presentacion/forms/add-" + nameform + ".php",
                    data: "action=" + d + "&content=" + content + "&tbl=" + tbl,
                    beforeSend: function () {
                        e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                    },
                    success: function (data) {
                        e.find(".modal-body").html(data);
                    },
                    error: function () {
                    }
                });
            }),

            a("#EliminarConstatacion").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    mycodigo = c.data("content"),
                    f = c.data("form"),
                    operation = c.data("operation"),
                    e = a(this);
                mycod = mycodigo;
                form = f;

                $('#EliminarConstatacion').find(".modal-body").html("<h3 style='color:#157D09;text-align:center;'> ¿Seguro que deseas eliminar la constatación [" + mycodigo + "]?</h3>");

            }),
            a("#modalconstatacion").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    mycodigo = c.data("sol"),
                    user = c.data("user"),
                    e = a(this);
                e.find(".modal-title").text("[ SUBIR CONSTATACIÓN ]");
                $.ajax({
                    type: "POST",
                    url: "../adm/presentacion/forms/subir-constatacion.php",
                    data: "solicitud=" + mycodigo + "&user=" + user + "&source=constataciones",
                    beforeSend: function () {
                        e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                    },
                    success: function (data) {
                        e.find(".modal-body").html(data);
                    },
                    error: function () {
                    }
                });
            }),


            a("#VerDocumentos").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    d = c.data("whatever"),
                    content = c.data("content"),
                    myBeca = c.data("becaid"),
                    myName = c.data("name"),
                    e = a(this);
                //alert("action=verdocumentos&content="+d+"&myBeca="+myBeca);
                e.find(".modal-title").text("MENSAJE PARA [" + myName + "]");
                $.ajax({
                    type: "POST",
                    url: "presentacion/forms/view-documentos.php",
                    data: "action=verdocumentos&content=" + d + "&myBeca=" + myBeca,
                    beforeSend: function () {
                        e.find(".modal-body").html("cargando contenido...espere un momento por favor");
                    },
                    success: function (data) {
                        e.find(".modal-body").html(data);
                    },
                    error: function () {
                    }
                });
            }),


            a("#AgregarAdvertencia").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    content = c.data("content"),
                    tipo = c.data("tipo"),
                    titulo = c.data("title"),
                    user = c.data("user"),

                    e = a(this);

                document.getElementById("nombredocumento").value = titulo;
                document.getElementById("codigodocumento").value = content;
                document.getElementById("tipdoc").value = tipo;
                document.getElementById("iduser").value = user;

                e.find(".modal-title").text("HISTORIAL");

                return $.ajax({
                    type: "get",
                    url: '{{ base_url() }}/../../../mensajes',
                    data: {
                        idvalor: content,
                    },

                    beforeSend: function () {
                        e.find(".modal-title").text("[" + titulo + "]");
                        e.find(".timeline li").html("cargando contenido");
                    },

                    success: function (data) {

                        $('#ventanachat div').remove();

                        $.each(data, function (i, item) {

                            var nomuser;
                            var fechapull;
                            var lado;
                            var foto;

                            if (item.tipo_user == 2) {
                                item.tipo_user = 'pull-right',
                                    nomuser = 'Administrador',
                                    fechapull = 'pull-left',
                                    lado = 'right';
                                foto = 'https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-128.png';
                            } else {
                                item.tipo_user = 'pull-left',
                                    nomuser = 'Usuario',
                                    fechapull = 'pull-right';
                                foto = 'https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-128.png';
                            }

                            $("#ventanachat").append("" +
                                "<div class='direct-chat-msg " + lado + "'>" +
                                "<div class='direct-chat-info clearfix'>" +
                                "<span class='direct-chat-name " + item.tipo_user + "'>" + nomuser + "" +
                                "</span>" +
                                "<span class='direct-chat-timestamp " + fechapull + "'>" + item.fecha_registro + "" +
                                "</span>" +
                                "</div>" +
                                "<img class='direct-chat-img' src='" + foto + "' alt='message user image'>" +
                                "<div class='direct-chat-text'>" + item.mensaje + "" +
                                "</div>" +
                                "</div>"
                            );
                        });
                    },

                    error: function () {
                    }
                });
            }),


            a("#VerHistorial").on("show.bs.modal", function (b) {
                var c = a(b.relatedTarget),
                    codigo = c.data("codigo"),
                    tipo = c.data("tipo"),
                    nombre = c.data("nombre"),
                    e = a(this);
                e = a(this);
                e.find(".modal-title").text("HISTORIAL");
                $.ajax({
                    type: "get",
                    url: '{{ base_url() }}/../../../documentos',
                    data: {
                        idvalor: codigo,
                        tipo: tipo,
                    },
                    beforeSend: function () {
                        e.find(".modal-title").text("[" + nombre + "]");
                        e.find(".timeline li").html("cargando contenido");
                    },
                    success: function (data) {
                        $('.timeline li').remove();
                        $.each(data, function (i, item) {
                            if (item.flag == 1) {
                                item.flag = '<span class=\'label label-info\'><i class=\'fa fa-search\'></i>  EN EVALUACIÓN</span>';
                            } else if (item.flag == 2) {
                                item.flag = '<span class=\'label label-danger\'><i class=\'fa fa-exclamation-triangle\'></i>  OBSERVADO</span>';
                            } else if (item.flag == 3) {
                                item.flag = '<span class=\'label label-success\'><i class=\'fa fa-check\'></i>  APROBADO</span></span></li';
                            }

                            $(".timeline").append("" +
                                "<li>" +
                                "<a target='_blank' href='" + item.urldoc + "'><i class='fa fa-folder'></i> " + item.urldoc + "</a>" +
                                "<p><i class='fa fa-calendar'></i> " + item.freg + "</p>" +
                                item.flag);

                        });
                    },
                    error: function () {
                    }
                });
            }),


            a("#aprobar-solicitud").on("click", function () {
                var b = a(this), dataString;
                dataString = $('#aprobar_form').serialize();
                $.ajax({
                    type: "POST",
                    url: '{{ base_url() }}/../../../aprobarsolicitud',
                    data: dataString,
                    beforeSend: function () {
                    },
                    success: function (data) {
                        b.button("reset");
                        $('#modalaprobar').modal('hide')
                        $('#modalinfo').find(".modal-body").html("<center>" + data + "</center>");
                        $('#modalinfo').modal('show');
                        setTimeout(function () {
                            location.reload();
                        }, 1500);
                    },
                    error: function () {
                        $('#modalinfo').find(".modal-body").html("<center><h3 style='color:#157D09;'><i class='fa fa-exclamation-triangle'></i&nbsp;>Se ha producido un error inesperado</h3></center>");
                        $('#modalinfo').modal('show');
                    }
                });
            }),

            a("#aprobar-verificacion").on("click", function () {
                var b = a(this), dataString;
                dataString = $('#aprobar_form').serialize();
                $.ajax({
                    type: "POST",
                    url: '{{ base_url() }}/../../../aprobarverificacion',
                    data: dataString,
                    beforeSend: function () {
                    },
                    success: function (data) {
                        b.button("reset");
                        $('#modalaprobar').modal('hide')
                        $('#modalinfo').find(".modal-body").html("<center>" + data + "</center>");
                        $('#modalinfo').modal('show');
                        setTimeout(function () {
                            location.reload();
                        }, 1500);
                    },
                    error: function () {
                        $('#modalinfo').find(".modal-body").html("<center><h3 style='color:#157D09;'><i class='fa fa-exclamation-triangle'></i&nbsp;>Se ha producido un error inesperado</h3></center>");
                        $('#modalinfo').modal('show');
                    }
                });
            }),

            a("#rechazarsolicitud").on("click", function () {
                var b = a(this), dataString;
                var holder = '';
                var exito = true;
                $(".obligateeliminar").each(function () {
                    if ($(this).val() == '') {
                        $(this).focus();
                        holder = $(this).attr("data-content");
                        exito = false;
                        $(".msg").html("").show();
                        $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                        setTimeout(function () {
                            location.reload();
                        }, 1500);
                        return false;
                    }
                });
                if (!exito)
                    return false;
                dataString = $('#eliminar_form').serialize();
                $.ajax({
                    type: "POST",
                    url: "{{ base_url() }}/../../../eliminarsolicitud",
                    data: dataString,
                    beforeSend: function () {
                        b.button("loading");
                    },
                    success: function (data) {
                        var position = data.indexOf('?');
                        var number = data.substr(0, position).replace(/\s+/g, '');
                        // alert(data + "=>" + position + " =>" + number + " =>"+number.length);
                        if (number > 0) {
                            b.button("reset");
                            $('#modalrechazo').modal('hide')
                            $('#modalinfo').find(".modal-body").html("<center>" + data.substr(position + 1, data.length) + "</center>");
                            $('#modalinfo').modal('show');
                            ;
                            setTimeout(function () {
                                window.location.href = window.location;
                            }, 2000);

                        } else {
                            $(".msg").html("").show();
                            // $(".msg").html(data);
                            $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                            setTimeout(function () {
                                $(".msg").fadeOut(1500);
                            }, 1500);
                            b.button("reset");
                        }

                    },
                    error: function () {
                        console.log("It failed");
                    }
                })
            });

        a("#rechazarreconocimiento").on("click", function () {
            var b = a(this), dataString;
            var holder = '';
            var exito = true;
            $(".obligatearchivar").each(function () {
                if ($(this).val() == '') {
                    $(this).focus();
                    holder = $(this).attr("data-content");
                    exito = false;
                    $(".msg").html("").show();
                    $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                    setTimeout(function () {
                        location.reload();
                    }, 1500);
                    return false;
                }
            });
            if (!exito)
                return false;
            dataString = $('#rechazarrec').serialize();
            $.ajax({
                type: "POST",
                url: "{{ base_url() }}/../../../eliminarreconocimiento",
                data: dataString,
                beforeSend: function () {
                    b.button("loading");
                },
                success: function (data) {
                    var position = data.indexOf('?');
                    var number = data.substr(0, position).replace(/\s+/g, '');
                    // alert(data + "=>" + position + " =>" + number + " =>"+number.length);
                    if (number > 0) {
                        b.button("reset");
                        $('#modalrechazo').modal('hide')
                        $('#modalinfo').find(".modal-body").html("<center>" + data.substr(position + 1, data.length) + "</center>");
                        $('#modalinfo').modal('show');
                        ;
                        setTimeout(function () {
                            window.location.href = window.location;
                        }, 2000);

                    } else {
                        $(".msg").html("").show();
                        // $(".msg").html(data);
                        $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                        }, 1500);
                        b.button("reset");
                    }

                },
                error: function () {
                    console.log("It failed");
                }
            })
        });

        a("#eliminar-constatacion").on("click", function () {
            var b = a(this);
            b.button("loading");

            $.ajax({
                type: "POST",
                url: "presentacion/action/action.php",
                data: "type=" + content + "&origen=" + form + "&codigo=" + mycod,
                beforeSend: function () {
                },
                success: function (data) {
                    b.button("reset");
                    //$("#row_"+mycod).slideUp();
                    $('#EliminarConstatacion').modal('hide')
                    $('#modalinfo').find(".modal-body").html("<center>" + data + "</center>");
                    $('#modalinfo').modal('show');
                },
                error: function () {
                    $('#modalinfo').find(".modal-body").html("<center><h3 style='color:#157D09;'><i class='fa fa-exclamation-triangle'></i&nbsp;>Se ha producido un error inesperado</h3></center>");
                    $('#modalinfo').modal('show');
                }
            });
        }),


            $('.subirresolucion').click(function () {
                //CKEDITOR.instances[instance].updateElement();
                var b = a(this), dataString;
                var holder = '';
                var exito = true;
                $(".obligate2").each(function () {
                    if ($(this).val() == '') {
                        $(this).focus();
                        holder = $(this).attr("data-content");
                        exito = false;
                        $(".msgu2").html("").show();
                        $(".msgu2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                        setTimeout(function () {
                            $(".msgu2").fadeOut(1500);
                        }, 1500);
                        return false;
                    }
                });

                if (!exito)
                    return false;

                var formData = new FormData($("#resolucion")[0]);

                $.ajax({
                    type: "POST",
                    url: "{{ base_url() }}/../../../subirresolucion",
                    data: formData,
                    contentType: false,
                    processData: false,
                    dataType: 'json',
                    beforeSend: function () {
                        b.button("Subiendo");
                        $('.subirresolucion').attr("disabled", true);
                        $('.barra2').html("<div class='progress progress-sm active'><div class='progress-bar progress-bar-success progress-bar-striped' role='progressbar' aria-valuenow='20' aria-valuemin='0' aria-valuemax='100' style='width: 100%'><span class='sr-only'>20% Complete</span></div></div>");
                    },
                    success: function (datos) {
                        if (datos.response == 'success') {
                            $('.barra2').html(datos.message);
                            setTimeout("location.reload()", 2500);
                        } else {
                            $('.barra2').html(datos.message);
                        }
                    },
                    error: function () {
                        console.log("Error");
                    }
                })
            });

        $('.subirverificacion').click(function () {
            //CKEDITOR.instances[instance].updateElement();
            var b = a(this), dataString;
            var holder = '';
            var exito = true;
            $(".obligate2").each(function () {
                if ($(this).val() == '') {
                    $(this).focus();
                    holder = $(this).attr("data-content");
                    exito = false;
                    $(".msgu2").html("").show();
                    $(".msgu2").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                    setTimeout(function () {
                        $(".msgu2").fadeOut(1500);
                    }, 1500);
                    return false;
                }
            });

            if (!exito)
                return false;

            var formData = new FormData($("#verificacion")[0]);

            $.ajax({
                type: "POST",
                url: "{{ base_url() }}/../../../subirverificacion",
                data: formData,
                contentType: false,
                processData: false,
                dataType: 'json',
                beforeSend: function () {
                    b.button("Subiendo");
                    $('.subirverificacion').attr("disabled", true);
                    $('.barra2').html("<div class='progress progress-sm active'><div class='progress-bar progress-bar-success progress-bar-striped' role='progressbar' aria-valuenow='20' aria-valuemin='0' aria-valuemax='100' style='width: 100%'><span class='sr-only'>20% Complete</span></div></div>");
                },
                success: function (datos) {
                    if (datos.response == 'success') {
                        $('.barra2').html(datos.message);
                        setTimeout("location.reload()", 2500);
                    } else {
                        $('.barra2').html(datos.message);
                    }
                },
                error: function () {
                    console.log("Error");
                }
            })
        });

        a("#solicitar-constatacion").on("click", function () {
            var b = a(this);
            b.button("loading");

            $.ajax({
                type: "POST",
                url: "presentacion/action/action.php",
                data: "type=save&origen=solicitar-constatacion&codigo=" + mycod,
                beforeSend: function () {

                },
                success: function (data) {
                    b.button("reset");
                    $('#myModalaok').modal('hide')
                    $('#modalinfo').find(".modal-body").html("<center>" + data + "</center>");
                    $('#modalinfo').modal('show');

                },
                error: function () {
                    $('#modalinfo').find(".modal-body").html("<center><h3 style='color:#157D09;'><i class='fa fa-exclamation-triangle'></i&nbsp;>Se ha producido un error inesperado</h3></center>");
                    $('#modalinfo').modal('show');
                }
            });
        });


        a("#atender").on("click", function () {
            var b = a(this), dataString;
            var holder = '';
            var exito = true;

            $(".obligate").each(function () {
                if ($(this).val() == '') {
                    $(this).focus();
                    holder = $(this).attr("data-content");
                    exito = false;
                    $(".msg").html("").show();
                    $(".msg").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                    setTimeout(function () {
                        $(".msg").fadeOut(1500);
                    }, 1500);
                    return false;
                }
            });
            if (!exito)
                return false;
            dataString = $('#formulario').serialize();
            $.ajax({
                type: "POST",
                url: "{{ base_url() }}/../../admin/formulario/atender",
                data: dataString,
                dataType: 'json',
                beforeSend: function () {
                    b.button("loading");
                },
                success: function (data) {

                    if (data.response == 'aprobado') {
                        $(".msg").html("<div class='alert alert-warning'><i class='fa fa-exclamation-triangle'></i> El asunto  ya fue atendida anteriormente.</div>");
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                            $('#modalAtencion').modal('hide');
                            b.button("reset");
                            $('#formulario').trigger("reset");
                            
                        }, 2500);

                    } else if (data.response == 'atendido') {
                        $(".msg").html("<div class='alert alert-success'><i class='fa fa-exclamation-triangle'></i> El asunto se atendió con éxito.</div>");
                        setTimeout(function () {
                            $(".msg").fadeOut(1500);
                            $('#modalAtencion').modal('hide');
                            b.button("reset");
                            $('#formulario').trigger("reset");
                            ListarDonaciones();
                        }, 2500);

                    } else {
                        alert("Ocurrió un error");
                    }


                },
                error: function () {
                    console.log("It failed");
                }
            })
        });

    })
}


(jQuery), function () {
    "use strict";
    $('#fono').keyup(function () {
        this.value = (this.value + '').replace(/[^0-9]/g, '');
    });

}();






